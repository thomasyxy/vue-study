<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>自定义指令</title>
  </head>
  <body>
    <div id="demo" v-demo:hello.a.b="msg"></div>

    <script src="../../lib/vue.js"></script>
    <script type="text/javascript">
      // el: 指令绑定的元素。
      // vm: 拥有该指令的上下文 ViewModel。
      // expression: 指令的表达式，不包括参数和过滤器。
      // arg: 指令的参数。
      // name: 指令的名字，不包含前缀。
      // modifiers: 一个对象，包含指令的修饰符。
      // descriptor: 一个对象，包含指令的解析结果。
      // 你应当将这些属性视为只读的，不要修改它们。你也可以给指令对象添加自定义属性，但是注意不要覆盖已有的内部属性
      Vue.directive('demo', {
        bind: function(){
          console.log('demo bound!');
        },
        update: function(value){
          this.el.innerHTML =
            'name - '       + this.name + '<br>' +
            'expression - ' + this.expression + '<br>' +
            'argument - '   + this.arg + '<br>' +
            'modifiers - '  + JSON.stringify(this.modifiers) + '<br>' +
            'value - '      + value
        },
        unbind: function(){
          console.log('demo finish');
        }
      });
      var demo = new Vue({
        el: '#demo',
        data: {
          msg: 'hello!'
        }
      })
    </script>
  </body>
</html>
